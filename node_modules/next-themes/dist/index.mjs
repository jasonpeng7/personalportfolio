"use client";import*as t from"react";var x=(e,m,s,u,a,d,l,h)=>{let r=document.documentElement,w=["light","dark"];function y(c){(Array.isArray(e)?e:[e]).forEach(g=>{let S=g==="class",R=S&&d?a.map(p=>d[p]||p):a;S?(r.classList.remove(...R),r.classList.add(c)):r.setAttribute(g,c)}),E(c)}function E(c){h&&w.includes(c)&&(r.style.colorScheme=c)}function i(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(u)y(u);else try{let c=localStorage.getItem(m)||s,g=l&&c==="system"?i():c;y(g)}catch(c){}};var M=["light","dark"],b="(prefers-color-scheme: dark)",N=typeof window=="undefined",A=t.createContext(void 0),U={setTheme:e=>{},themes:[]},z=()=>{var e;return(e=t.useContext(A))!=null?e:U},J=e=>t.useContext(A)?t.createElement(t.Fragment,null,e.children):t.createElement(H,{...e}),_=["light","dark"],H=({forcedTheme:e,disableTransitionOnChange:m=!1,enableSystem:s=!0,enableColorScheme:u=!0,storageKey:a="theme",themes:d=_,defaultTheme:l=s?"system":"light",attribute:h="data-theme",value:r,children:w,nonce:y,scriptProps:E})=>{let[i,c]=t.useState(()=>I(a,l)),[T,g]=t.useState(()=>I(a)),S=r?Object.values(r):d,R=t.useCallback(n=>{let o=n;if(!o)return;n==="system"&&s&&(o=Q());let f=r?r[o]:o,P=m?W():null,k=document.documentElement,L=v=>{v==="class"?(k.classList.remove(...S),f&&k.classList.add(f)):v.startsWith("data-")&&(f?k.setAttribute(v,f):k.removeAttribute(v))};if(Array.isArray(h)?h.forEach(L):L(h),u){let v=M.includes(l)?l:null,O=M.includes(o)?o:v;k.style.colorScheme=O}P==null||P()},[]),p=t.useCallback(n=>{let o=typeof n=="function"?n(i):n;c(o);try{localStorage.setItem(a,o)}catch(f){}},[i]),C=t.useCallback(n=>{let o=Q(n);g(o),i==="system"&&s&&!e&&R("system")},[i,e]);t.useEffect(()=>{let n=window.matchMedia(b);return n.addListener(C),C(n),()=>n.removeListener(C)},[C]),t.useEffect(()=>{let n=o=>{if(o.key!==a)return;let f=o.newValue||l;p(f)};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)},[p]),t.useEffect(()=>{R(e!=null?e:i)},[e,i]);let D=t.useMemo(()=>({theme:i,setTheme:p,forcedTheme:e,resolvedTheme:i==="system"?T:i,themes:s?[...d,"system"]:d,systemTheme:s?T:void 0}),[i,p,e,T,s,d]);return t.createElement(A.Provider,{value:D},t.createElement(V,{forcedTheme:e,storageKey:a,attribute:h,enableSystem:s,enableColorScheme:u,defaultTheme:l,value:r,themes:d,nonce:y,scriptProps:E}),w)},V=t.memo(({forcedTheme:e,storageKey:m,attribute:s,enableSystem:u,enableColorScheme:a,defaultTheme:d,value:l,themes:h,nonce:r,scriptProps:w})=>{let y=JSON.stringify([s,m,d,e,h,l,u,a]).slice(1,-1);return t.createElement("script",{...w,suppressHydrationWarning:!0,nonce:typeof window=="undefined"?r:"",dangerouslySetInnerHTML:{__html:`(${x.toString()})(${y})`}})}),I=(e,m)=>{if(N)return;let s;try{s=localStorage.getItem(e)||void 0}catch(u){}return s||m},W=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},Q=e=>(e||(e=window.matchMedia(b)),e.matches?"dark":"light");export{J as ThemeProvider,z as useTheme};
